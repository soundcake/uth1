
<h2>Info</h2>
Project created with Laravel, using Spatie roles and permissions package, breeze + react starter kit (initial scaffolding, inertia, reusable react input components, tailwind etc), as well as the sqlite database.

<h2>Setup</h2>
To get up and running, clone the repo and run the following commands from the projects root directory:
```
composer install

./vendor/bin/sail up

npm install

npm run dev
```
And then migrate and populate the database:
```
php artisan migrate:fresh --seed
```

<h2>Details</h2>
There are 3 pages:
<ul>
<li><a>http://localhost/</a> - accessible by anyone</li>
<li><a>http://localhost/user/dashboard</a> - accessible by both users and admins (roles: 'BankUser' and 'BankAdmin')</li>
<li><a>http://localhost/admin/dashboard</a> - accessible by admins only (role: 'BankAdmin')</li>
</ul>
<hr />

Users can have multiple bank accounts and multiple credit cards. Users and card / account details are generated by factories.

After logging in, users are redirected to the relevant dashboard based on their role via a simple middleware. Additionally, both dashboards are protected by a permission requirement.

User dashboard does not contain much to look at. 

Admin dashboard displays a table with all user names, their roles, their bank account and credit card details (single action controllers returning an Inertia response).
<hr />
In order to see the user details in the database (to log in with), first run:

```
php artisan tinker
```

And then to select admins:
```
DB::select('SELECT users.id AS user_id, users.name, users.email, roles.name AS role_name FROM users INNER JOIN model_has_roles ON model_has_roles.model_id = users.id INNER JOIN roles ON roles.id = model_has_roles.role_id WHERE roles.name = \'BankAdmin\'')
```
Or to select users:
```
DB::select('SELECT users.id AS user_id, users.name, users.email, roles.name AS role_name FROM users INNER JOIN model_has_roles ON model_has_roles.model_id = users.id INNER JOIN roles ON roles.id = model_has_roles.role_id WHERE roles.name = \'BankUser\'')
```

The above will show user emails and the password for every user is: <strong>password</strong>

<hr />

Tests can be run as normal:

```
php artisan test

./vendor/bin/phpunit
```

AdminDashboard feature test makes sure only admins can access the admin dashboard
